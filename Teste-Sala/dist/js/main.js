function onSignIn(a){var e=a.getBasicProfile(),t=(e.getId(),e.getName()),l=e.getEmail(),n=e.getImageUrl();$("#responsavel").val(t),$("#imagemPerfil").html("<img id='circle' src="+n+">"),$("#nomeUsuario").html(t),$("#email").html(l);var i=l.indexOf("@"),r=l.substring(0,i),s=t.indexOf(" ");t=t.replace(/[ìíî]/,"i");t.substring(0,s);pesquisar(r);a.getAuthResponse().id_token;$("#btnEntrar").click(function(){loginSucess(l)}),$("#btnSair").click(function(){deslogar()})}function deslogar(){var a=gapi.auth2.getAuthInstance();a.signOut().then(function(){openWin()})}function openWin(){var a;a=window.open("https://accounts.google.com/logout","myWindow","width=10,height=10"),setTimeout(function(){a.close()},500),setTimeout(function(){window.location.assign("http://localhost:9000/login")},1e3)}function loginSucess(a){var e=a.length,t=a.indexOf("@"),l=(a.substring(0,t),a.substring(t+1,e));"digitaldesk.com.br"==l?window.location="http://localhost:9000/reunioes":alert("Este e-mail não tem acesso ao site!")}function pesquisar(a){url="http://localhost:9000/busca/"+a;var e="";return $.ajax({type:"GET",url:url,async:!1,datatype:"text/html",success:function(a){e+=a,$("#reunioesRequerente").html(e),pesquisarParticipante(nome)}}),e}function filter(){$("#filter").on("change",function(){var a=$(this).val();if("responsavel"==a)$("#filter-data, #filter-sala").hide(),$("#filter-responsavel").show();else if("sala"==a){$("#filter-data, #filter-responsavel").hide(),$("#filter-sala").show(),url="http://localhost:9000/sala/";for(var e=ajax(url,"GET"),t=0;t<e.length;t++)$("#filter-sala").append("<option value="+t+">"+e[t].nomeSala+"</option>")}else"data"==a&&($("#filter-responsavel, #filter-sala").hide(),$("#filter-data").show())})}function ajax(a,e){var t="";return $.ajax({type:e,url:a,async:!1,success:function(a){t=a}}),t}function datePicker(){$("#form-reservar #data, #filter-data").datepicker({format:"dd/mm/yyyy",weekStart:0,maxViewMode:3,todayBtn:"linked",clearBtn:!0,language:"pt-BR",orientation:"bottom right",multidate:!1,daysOfWeekDisabled:"0",daysOfWeekHighlighted:"0",autoclose:!0,todayHighlight:!0,toggleActive:!0})}function pesquisaSala(){var a=$("#filter-sala").val();url="http://localhost:9000/sala/"+a;var e=ajax(url,"GET");0==e.length&&alert("Nenhuma reunião encontrada");for(var t="",l=0;l<e.length;l++)t+='<tr  data-id="'+e[l].id+'"><td>'+e[l].dia+"</td>",t+="<td>"+e[l].hora+"</td>",t+="<td>"+e[l].nomeSala+"</td>",t+="<td>"+e[l].nome+"</td>",t+="<td>"+e[l].integranteId+'</td><td><span class="fa fa-pencil" data-type="editReuniao"></span></td><td><span class="fa fa-trash" data-type="deleteReuiniao"  data-toggle="modal" data-target="#modalDelete"></span></td></tr>';$("#tabelaReservas").html(t)}function pesquisaData(){var a=$("#filter-data").val();url="http://localhost:9000/data/"+a;var e=ajax(url,"GET");0==e.length&&alert("Nenhuma reunião encontrada");for(var t="",l=0;l<e.length;l++)t+='<tr data-id="'+e[l].id+'"><td>'+e[l].dia+"</td>",t+="<td>"+e[l].hora+"</td>",t+="<td>"+e[l].nomeSala+"</td>",t+="<td>"+e[l].nome+"</td>",t+="<td>"+e[l].integranteId+'</td><td><span class="fa fa-pencil" data-type="editReuniao"></span></td><td><span class="fa fa-trash" data-type="deleteReuiniao"  data-toggle="modal" data-target="#modalDelete"></span></td></tr>';$("#tabelaReservas").html(t)}function pesquisaResponsavel(){var a=$("#filter-responsavel").val();url="http://localhost:9000/responsavel/"+a;var e=ajax(url,"GET");console.log(e),0==e.length&&alert("Nenhuma reunião encontrada");for(var t="",l=0;l<e.length;l++)t+='<tr data-id="'+e[l].id+'"><td>'+e[l].dia+"</td>",t+="<td>"+e[l].hora+"</td>",t+="<td>"+e[l].nomeSala+"</td>",t+="<td>"+e[l].nome+"</td>",t+="<td>"+e[l].integranteId+"</td>",t+='<td><span class="fa fa-pencil" data-type="editReuniao"></span></td><td><span class="fa fa-trash" data-type="deleteReuniao"  data-toggle="modal" data-target="#modalDelete"></span></td></tr>';$("#tabelaReservas").html(t)}function encaminharRequisicao(a){var a=$("#filter").val();"sala"==a?pesquisaSala():"data"==a?pesquisaData():"responsavel"==a&&pesquisaResponsavel(),$("#filter-responsavel").val(""),$("#filter-data").val("")}function validacao(a){return a=a.replace(/[:\/]/g,"-")}function replaceCaracteresEspeciais(a,e){if(0==a)var t=e;else if(0==e)var t=a;return t=t.replace(/[ÀÁÂÃÄÅ]/,"A"),t=t.replace(/[àáâãäå]/,"a"),t=t.replace(/[ÈÉÊË]/,"E"),t=t.replace(/[èéêë]/,"e"),t=t.replace(/[ìíî]/,"i"),t=t.replace(/[ÌÍÎ]/,"I"),t=t.replace(/[ÒÓÕÔ]/,"O"),t=t.replace(/[óòôõ]/,"o"),t=t.replace(/[ÙÚÛÜ]/,"U"),t=t.replace(/[ùúûü]/,"u"),t=t.replace(/[Ç]/,"C"),t=t.replace(/[ç]/,"c")}function validacaoNomes(a){return a=a.replace(/[:\/]/g,"-")}function inserirDados(){var a=$("#sala").val(),e=$("#data").val(),t=$("#horario").val(),l=$("#responsavel").val(),n=$("#pauta").val(),i=$("#participantes").val();e=validacao(e),a=replaceCaracteresEspeciais(a,0),console.log(a),l=replaceCaracteresEspeciais(0,l),console.log(l),url="http://localhost:9000/inserir/"+e+"/"+n+"/"+i+"/"+l+"/"+a+"/"+t,console.log(url),ajax(url,"POST")}var url;$(document).ready(function(){filter(),datePicker(),$("#botao").click(function(){encaminharRequisicao()}),$("#reservar").click(function(){inserirDados()}),$("#tabelaReservas").on("click",".fa-trash, .fa-pencil",function(){$(this).closest("tr").data("id")})}),$(document).keypress(function(a){13==a.which&&encaminharRequisicao()});